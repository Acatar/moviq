/*! moviq-build 2015-03-05 */
var moviqContainer=new Hilary;moviqContainer.register({name:"locale::en_US",factory:{errors:{interfaces:{requiresImplementation:"An implementation is required to create a new instance of an interface",requiresProperty:"The implementation is missing a required property: ",requiresArguments:"The implementation of this function requires the arguments: "},jqButtons:{fullscreenNotSupported:"Sorry, we don't recognize your browser, so we can't toggle fullscreen mode."}},messages:{browserNotSupported:"Sorry, a browser that supports HTML5 video playback is required to view this content."}}}),moviqContainer.register({name:"IButtons",dependencies:["locale"],factory:function(){"use strict";return function(a){var b=this,c=a||{};b.togglePlay=c.togglePlay,b.toggleFullscreen=c.toggleFullscreen,b.toggleCaptions=c.toggleCaptions,b.toggleMute=c.toggleMute,b.toggleQuality=c.toggleQuality,b.changeQuality=c.changeQuality,b.toggleSpeed=c.toggleSpeed,b.changeSpeed=c.changeSpeed}}}),moviqContainer.register({name:"ICaption",dependencies:["locale"],factory:function(a){"use strict";return function(b){var c=this;if(!b)throw new Error(a.errors.interfaces.requiresImplementation);if("string"!=typeof b.src)throw new Error(a.errors.interfaces.requiresProperty+"src");if("string"!=typeof b.srclang)throw new Error(a.errors.interfaces.requiresProperty+"srclang");if("string"!=typeof b.label)throw new Error(a.errors.interfaces.requiresProperty+"label");c.src=b.src,c.srclang=b.srclang,c.label=b.label}}}),moviqContainer.register({name:"IEventEmitter",dependencies:["locale"],factory:function(a){"use strict";return function(b){var c=this;if(!b)throw new Error(a.errors.interfaces.requiresImplementation);if("function"!=typeof b.emit)throw new Error(a.errors.interfaces.requiresProperty+"emit");if(2!==b.emit.length)throw new Error(a.errors.interfaces.requiresArguments+"type, data");c.emit=b.emit}}}),moviqContainer.register({name:"IEvents",dependencies:["locale"],factory:function(){"use strict";return function(a){var b=this,c=function(){};b.onLoadMetadata=a.onLoadMetadata||c,b.onTimeUpdate=a.onTimeUpdate||c,b.onCanPlay=a.onCanPlay||c,b.onCanPlayThrough=a.onCanPlayThrough||c,b.onVideoEnded=a.onVideoEnded||c,b.onSeeking=a.onSeeking||c,b.onSeekComplete=a.onSeekComplete||c,b.onWaiting=a.onWaiting||c,b.onError=a.onError||c,b.onPlay=a.onPlay||c,b.onPause=a.onPause||c,b.onShowCaptions=a.onShowCaptions||c,b.onHideCaptions=a.onHideCaptions||c,b.onToggleSpeed=a.onToggleSpeed||c,b.onChangeSpeed=a.onChangeSpeed||c,b.onToggleQuality=a.onToggleQuality||c,b.onChangeQuality=a.onChangeQuality||c,b.onSoundOn=a.onSoundOn||c,b.onSoundOff=a.onSoundOff||c,b.onFullscreenOn=a.onFullscreenOn||c,b.onFullscreenOff=a.onFullscreenOff||c}}}),moviqContainer.register({name:"IHtmlTemplateGenerator",dependencies:["locale"],factory:function(a){"use strict";return function(b){var c=this,d=b||{};if(!b)throw new Error(a.errors.interfaces.requiresImplementation);if("function"!=typeof d.makeControlsMarkup)throw new Error(a.errors.interfaces.requiresProperty+"makeControlsMarkup");if(2!==d.makeControlsMarkup.length)throw new Error(a.errors.interfaces.requiresArguments+"sources, captions");if("function"!=typeof d.makeSourceMarkup)throw new Error(a.errors.interfaces.requiresProperty+"makeSourceMarkup");if(1!==d.makeSourceMarkup.length)throw new Error(a.errors.interfaces.requiresArguments+"iSourceArray");if("function"!=typeof d.makeCaptionMarkup)throw new Error(a.errors.interfaces.requiresProperty+"makeCaptionMarkup");if(1!==d.makeCaptionMarkup.length)throw new Error(a.errors.interfaces.requiresArguments+"iCaptionArray");if("function"!=typeof d.makeHeaderMarkup)throw new Error(a.errors.interfaces.requiresProperty+"makeHeaderMarkup");if(1!==d.makeHeaderMarkup.length)throw new Error(a.errors.interfaces.requiresArguments+"header");if("function"!=typeof d.makeVideoMarkup)throw new Error(a.errors.interfaces.requiresProperty+"makeVideoMarkup");if(1!==d.makeVideoMarkup.length)throw new Error(a.errors.interfaces.requiresArguments+"poster");c.makeControlsMarkup=d.makeControlsMarkup,c.makeSourceMarkup=d.makeSourceMarkup,c.makeCaptionMarkup=d.makeCaptionMarkup,c.makeHeaderMarkup=d.makeHeaderMarkup,c.makeVideoMarkup=d.makeVideoMarkup}}}),moviqContainer.register({name:"IMoviq",dependencies:["locale"],factory:function(a){"use strict";return function(b){var c=this,d=b||{};if(!b)throw new Error(a.errors.interfaces.requiresImplementation);if("function"!=typeof d.ify)throw new Error(a.errors.interfaces.requiresProperty+"ify");if("function"!=typeof d.bindAll)throw new Error(a.errors.interfaces.requiresProperty+"bindAll");c.ify=d.ify,c.bindAll=d.bindAll}}}),moviqContainer.register({name:"IProgressMeter",dependencies:["locale"],factory:function(a){"use strict";return function(b){var c=this,d=b||{};if(!b)throw new Error(a.errors.interfaces.requiresImplementation);if("function"!=typeof d.init)throw new Error(a.errors.interfaces.requiresProperty+"init");if(1!==b.init.length)throw new Error(a.errors.interfaces.requiresArguments+"iVideo");c.init=d.init}}}),moviqContainer.register({name:"ISource",dependencies:["locale"],factory:function(a){"use strict";return function(b){var c=this;if(!b)throw new Error(a.errors.interfaces.requiresImplementation);if("string"!=typeof b.src)throw new Error(a.errors.interfaces.requiresProperty+"src");if("string"!=typeof b.type)throw new Error(a.errors.interfaces.requiresProperty+"type");if("string"!=typeof b.label)throw new Error(a.errors.interfaces.requiresProperty+"label");c.src=b.src,c.type=b.type,c.label=b.label}}}),moviqContainer.register({name:"ISourceParser",dependencies:["locale"],factory:function(a){"use strict";return function(b){var c=this,d=b||{};if(!b)throw new Error(a.errors.interfaces.requiresImplementation);if("function"!=typeof d.getSources)throw new Error(a.errors.interfaces.requiresProperty+"getSources");if(1!==d.getSources.length)throw new Error(a.errors.interfaces.requiresArguments+"iVideo");if("function"!=typeof d.getCaptions)throw new Error(a.errors.interfaces.requiresProperty+"getCaptions");if(1!==d.getCaptions.length)throw new Error(a.errors.interfaces.requiresArguments+"iVideo");if("function"!=typeof d.convertSources)throw new Error(a.errors.interfaces.requiresProperty+"convertSources");if(1!==d.convertSources.length)throw new Error(a.errors.interfaces.requiresArguments+"sourceArray");if("function"!=typeof d.convertCaptions)throw new Error(a.errors.interfaces.requiresProperty+"convertCaptions");if(1!==d.convertCaptions.length)throw new Error(a.errors.interfaces.requiresArguments+"captionArray");c.getSources=d.getSources,c.getCaptions=d.getCaptions,c.convertSources=d.convertSources,c.convertCaptions=d.convertCaptions}}}),moviqContainer.register({name:"ISourceManifestParser",dependencies:["locale"],factory:function(a){"use strict";return function(b){var c=this,d=b||{};if(!b)throw new Error(a.errors.interfaces.requiresImplementation);if("function"!=typeof d.getSourcesByManifest)throw new Error(a.errors.interfaces.requiresProperty+"getSourcesByManifest");if(1!==d.getSourcesByManifest.length)throw new Error(a.errors.interfaces.requiresArguments+"iVideo");c.getSourcesByManifest=d.getSourcesByManifest}}}),moviqContainer.register({name:"IVideo",dependencies:["locale"],factory:function(){"use strict";return function(a){var b=this,c=a||{};b.events=c.events,b.sources=c.sources,b.captions=c.captions,b.buttons=c.buttons,b.progressMeter=c.progressMeter,b.manifestUrl=c.manifestUrl,b.watchReport=c.watchReport,b.dom={handle:c.dom.handle,video:c.dom.video,controls:c.dom.controls,header:c.dom.header}}}}),moviqContainer.register({name:"IVideoInitializer",dependencies:["locale"],factory:function(a){"use strict";return function(b){var c=this,d=b||{};if(!b)throw new Error(a.errors.interfaces.requiresImplementation);if("function"!=typeof d.bindVideos)throw new Error(a.errors.interfaces.requiresProperty+"bindVideos");if(2!==d.bindVideos.length)throw new Error(a.errors.interfaces.requiresArguments+"querySelector, manifest");c.bindVideos=d.bindVideos}}}),moviqContainer.register({name:"consoleEventEmitter",dependencies:["locale","IEventEmitter"],factory:function(a,b){"use strict";return function(a){return new b({emit:function(b,c){console.log("moviq-event",[b,c]);var d,e=c;delete e.event,d={type:b,data:e,position:a.dom.video.currentTime,eventTime:(new Date).toISOString()},a.watchReport.events.push(d),a.watchReport.updateCoverageReport()}})}}}),moviqContainer.register({name:"defaultEventHandlers",dependencies:["locale"],factory:function(){"use strict";return function(a){var b={};return b.onError=function(b){throw a.emit("moviq-error",{message:b}),new Error(b)},b.onPlay=function(b){a.emit("moviq-play",{event:b})},b.onPause=function(b){a.emit("moviq-pause",{event:b})},b.onShowCaptions=function(b){a.emit("moviq-show-captions",{event:b})},b.onHideCaptions=function(b){a.emit("moviq-hide-captions",{event:b})},b.onToggleSpeed=function(b){a.emit("moviq-toggle-speed",{event:b})},b.onChangeSpeed=function(b,c){a.emit("moviq-change-speed",{speed:c,event:b})},b.onToggleQuality=function(b){a.emit("moviq-toggle-quality",{event:b})},b.onChangeQuality=function(b,c){a.emit("moviq-change-quality",{quality:b,event:c})},b.onSoundOn=function(b){a.emit("moviq-sound-on",{event:b})},b.onSoundOff=function(b){a.emit("moviq-sound-off",{event:b})},b.onFullscreenOn=function(b){a.emit("moviq-fullscreen-on",{event:b})},b.onFullscreenOff=function(b){a.emit("moviq-fullscreen-off",{event:b})},b}}}),moviqContainer.register({name:"defaultHtmlTemplates",dependencies:["locale"],factory:function(a){"use strict";var b,c,d,e,f,g,h,i;return b='<div class="moviq-controls"><div class="moviq-controls-enclosure-more moviq-controls-quality"></div><div class="moviq-controls-enclosure-more moviq-controls-speed"><output class=" moviq-btn-text moviq-current-speed">1x</output><input class="moviq-speed-chooser" type="range" min=".25" max="3" step=".25" value="1" aria-label="Choose a playback speed" /></div><div class="moviq-controls-enclosure-more moviq-controls-cc"></div><div class="moviq-controls-enclosure"><div class="moviq-controls-left"><button class="moviq-btn moviq-btn-play" aria-label="Play or pause the video"><span class="fa fa-play"></span></button></div><div class="moviq-progress"><span class="moviq-progress-display"></span><span class="moviq-progress-picker"></span><div class="moviq-progress-bar" aria-label="This bar shows the current position of the video, as well as the amount buffered. You can click anywhere in this bar to seek to a new position."><span class="moviq-progress-buffer"></span><span class="moviq-progress-time"></span></div></div><div class="moviq-controls-right"><button class="moviq-btn moviq-btn-cc" aria-label="Toggle closed captions. This will open a menu, if more than one text track is available."><i class="fa fa-cc"></i></button><button class="moviq-btn moviq-btn-speed" aria-label="Toggle the controls for choosing a playback speed"><i class="fa fa-clock-o"></i></button><button class="moviq-btn moviq-btn-quality moviq-btn-text" aria-label="Toggle the video quality options"><em>HD</em></button><button class="moviq-btn moviq-btn-mute" aria-label="Mute or unmute sound"><span class="fa fa-volume-off"></span></button><button class="moviq-btn moviq-btn-fullscreen" aria-label="Toggle fullscreen"><span class="fa fa-arrows-alt"></span></button></div></div></div>',c='<button class="moviq-btn moviq-btn-choose-quality moviq-btn-text" aria-label="Set the video quality to: {0}" data-quality="{0}"><em>{0}</em></button>',d='<button class="moviq-btn moviq-btn-choose-cc moviq-btn-text" aria-label="Set the closed captions to: {0}" data-quality="{0}"><em>{0}</em></button>',e='<source type="{type}" data-label="{label}" src="{src}" />',f='<track label="{label}" kind="captions" srclang="{srclang}" src="{src}">',g='<div class="moviq-header">{header}</div>',h='<video preload="auto"><p class="video-not-supported">'+a.messages.browserNotSupported+"</p></video>",i='<video preload="auto" poster="{poster}"><p class="video-not-supported">'+a.messages.browserNotSupported+"</p></video>",{controls:b,qualityButton:c,ccButton:d,sourceElement:e,trackElement:f,header:g,video:h,videoWithPoster:i}}}),moviqContainer.register({name:"IJqVideo",dependencies:["locale","IVideo"],factory:function(a,b){"use strict";return function(a){var c=new b(a),d=a||{};return c.$dom={$handle:d.$dom.$handle,$video:d.$dom.$video,$controls:d.$dom.$controls,$header:d.$dom.$header},c}}}),moviqContainer.register({name:"jqButtons",dependencies:["locale","jqQuerySelectors","IButtons","jQuery"],factory:function(a,b,c,d){"use strict";var e,f,g;return f=function(a,b,c){var e=c.controls.getHandle(c.controls.play),f=c.controls.getHandle(c.controls.cc),g=c.controls.getHandle(c.controls.speed),h=c.controls.getHandle(c.controls.quality),i=c.controls.getHandle(c.controls.quality_choice),j=c.controls.getHandle(c.controls.mute),k=c.controls.getHandle(c.controls.fullscreen),l=c.controls.getHandle(c.controls.speed_chooser),m=c.controls.getHandle(c.controls.speed_current);a.$dom.$handle.on("mouseenter",function(){a.$dom.$controls.stop().fadeTo(500,.9),a.$dom.$header.stop().fadeTo(500,.9)}).on("mouseleave",function(){a.$dom.$controls.stop().fadeOut(),a.$dom.$header.stop().fadeOut()}),e.on("click",function(c){var d=b.togglePlay();1===d?a.events.onPlay(c):0===d&&a.events.onPause(c)}),f.on("click",function(c){var d=b.toggleCaptions();1===d?a.events.onShowCaptions(c):0===d&&a.events.onHideCaptions(c)}),g.on("click",function(c){b.toggleSpeed();a.events.onToggleSpeed(c)}),l.on("change mousemove",function(c){var d=b.changeSpeed(l.val());m.text(l.val()+"x"),d.changed&&a.events.onChangeSpeed(c,d.newSpeed)}),h.on("click",function(c){b.toggleQuality();a.events.onToggleQuality(c)}),i.on("click",function(c){var e=d(c.currentTarget),f=e.attr("data-quality"),g=b.changeQuality(f);a.events.onChangeQuality(g)}),j.on("click",function(c){var d=b.toggleMute();1===d?a.events.onSoundOn(c):0===d&&a.events.onSoundOff(c)}),k.on("click",function(c){var d=b.toggleFullscreen();1===d?a.events.onFullscreenOn(c):0===d&&a.events.onFullscreenOff(c)})},g=function(b,d){var e,f,g,h,i,j,k,l,m,n,o,p=b.$dom.$video,q=b.dom.video;return e=function(){var a=d.controls.getIconHandle(d.controls.play);return q.paused||q.ended?(a.removeClass("fa-play").addClass("fa-pause"),q.play(),1):(a.removeClass("fa-pause").addClass("fa-play"),q.pause(),0)},g=function(){var a=b.$dom.$handle;return a.hasClass("fullscreen")?(i(b),0):(h(b),1)},h=function(){var c=b.dom.handle,e=b.$dom.$handle,f=d.controls.getIconHandle(d.controls.fullscreen);c.requestFullscreen?c.requestFullscreen():c.msRequestFullscreen?c.msRequestFullscreen():c.mozRequestFullScreen?c.mozRequestFullScreen():c.webkitRequestFullscreen?c.webkitRequestFullscreen():b.events.onError(a.errors.jqButtons.fullscreenNotSupported),e.addClass("fullscreen"),f.removeClass("fa-arrows-alt").addClass("fa-compress")},i=function(){var a=b.$dom.$handle,c=d.controls.getIconHandle(d.controls.fullscreen);a.removeClass("fullscreen"),c.removeClass("fa-compress").addClass("fa-arrows-alt"),document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen()},f=function(){var a=d.controls.getHandle(d.controls.cc),b=q.textTracks[0],c=q.textTracks.length>1;if(c)m(a,"with-cc");else if(a.hasClass("selected")){if(a.removeClass("selected"),b)return b.mode="hidden",0}else if(a.addClass("selected"),b)return b.mode="showing",1},j=function(){var a=d.controls.getIconHandle(d.controls.mute);return q.muted=!q.muted,a.hasClass("fa-volume-off")?(a.removeClass("fa-volume-off").addClass("fa-volume-up"),0):(a.removeClass("fa-volume-up").addClass("fa-volume-off"),1)},k=function(){var a=d.controls.getHandle(d.controls.speed);m(a,"with-speed")},l=function(a){if("number"==typeof a){var b=a.toFixed(2),c=q.playbackRate.toFixed(2);return b!==c?(q.playbackRate=a,{newSpeed:b,changed:!0}):{newSpeed:b,changed:!1}}if("string"!=typeof a)return{newSpeed:q.playbackRate.toFixed(2),changed:!1};try{return l(parseFloat(a))}catch(d){return q.playbackRate}},n=function(){var a=d.controls.getHandle(d.controls.quality);m(a,"with-quality")},o=function(a){var c,e,f;for(e=0;e<b.sources.length;e+=1)if(b.sources[e].label===a){c=b.sources[e];break}return d.controls.getHandle(d.controls.quality+" em").text(c.label),f=q.currentTime,q.pause(),p.attr("src",c.src),q.currentTime=f,q.play(),c},m=function(a,c){if(a.hasClass("selected"))a.removeClass("selected"),b.$dom.$controls.removeClass(c);else{var e;for(d.controls.getHandle(".selected").removeClass("selected"),e=0;e<d.controls.subMenus.length;e+=1)b.$dom.$controls.removeClass(d.controls.subMenus[e]);a.addClass("selected"),b.$dom.$controls.addClass(c)}},new c({togglePlay:e,toggleCaptions:f,toggleFullscreen:g,toggleMute:j,toggleSpeed:k,changeSpeed:l,toggleQuality:n,changeQuality:o})},e=function(a){var c=b(a),d=g(a,c);return f(a,d,c),d},{init:e}}}),moviqContainer.register({name:"jqEventEmitter",dependencies:["locale","IEventEmitter","jQuery"],factory:function(a,b,c){"use strict";return function(a){return new b({emit:function(b,d){c(document).trigger(b,[d]).trigger("moviq-event",[b,d]);var e,f=d;delete f.event,e={type:b,data:f,position:a.dom.video.currentTime,eventTime:(new Date).toISOString()},a.watchReport.events.push(e),a.watchReport.updateCoverageReport()}})}}}),moviqContainer.register({name:"jqHtmlTemplateGenerator",dependencies:["locale","defaultHtmlTemplates","IHtmlTemplateGenerator","jqQuerySelectors","jQuery"],factory:function(a,b,c,d,e){"use strict";var f,g,h,i,j;return f=function(a,c){var f,g,h,i,j=d();for(f=e(b.controls),g=f.find(j.controls.quality_menu),h=f.find(j.controls.cc_menu),i=0;i<a.length;i+=1)g.append(b.qualityButton.replace(/\{0\}/g,a[i].label));if(c)for(i=0;i<c.length;i+=1)h.append(b.ccButton.replace(/\{0\}/g,c[i].label));return f[0]},g=function(a){var c,d="";for(c=0;c<a.length;c+=1)d+=b.sourceElement.replace(/\{type\}/,a[c].type).replace(/\{label\}/,a[c].label).replace(/\{src\}/,a[c].src);return d},h=function(a){var c,d="";for(c=0;c<a.length;c+=1)d+=b.trackElement.replace(/\{label\}/,a[c].label).replace(/\{srclang\}/,a[c].srclang).replace(/\{src\}/,a[c].src);return d},i=function(a){return b.header.replace(/\{header\}/,a)},j=function(a){return a?b.videoWithPoster.replace(/\{poster\}/,a):b.video},new c({makeControlsMarkup:f,makeSourceMarkup:g,makeCaptionMarkup:h,makeHeaderMarkup:i,makeVideoMarkup:j})}}),moviqContainer.register({name:"jqProgressMeter",dependencies:["locale","jqQuerySelectors","IProgressMeter"],factory:function(a,b,c){"use strict";var d=function(a){var c,d,e,f,g,h,i,j,k,l,m=b(a),n=!1;return c=a.$dom.$video,d=a.dom.video,e=m.controls.getHandle(m.controls.progress_bar),f=m.controls.getHandle(m.controls.progress_time),g=m.controls.getHandle(m.controls.progress_buffer),h=m.controls.getHandle(m.controls.progress_timeDisplay),k={getPositionPercent:function(){return 100*(d.currentTime/d.duration)},getBufferedPercent:function(){return d.buffered.length>0?100*(d.buffered.end(0)/d.duration):0},getAmountConsumed:function(){throw new Error("NOT IMPLEMENTED")}},l={setPosition:function(a){var b=l.getCoordinates(a).percent;d.pause(),l.updateDisplay(b),d.currentTime=d.duration*b/100,d.play()},getCoordinates:function(a){var b=a-e.offset().left,c=100*b/e.width();return c>100?c=100:0>c&&(c=0),{position:b,percent:c}},getPosition:function(a){var b=l.getCoordinates(a),c=d.duration*(b.percent/100);return{time:j(c),left:b.position}},updateDisplay:function(a){var b=a||k.getPositionPercent(),c=k.getBufferedPercent(),e=j(d.currentTime);d.duration>0&&(e+=" / "+j(d.duration)),f.css("width",b+"%"),g.css("width",c+"%"),n||h.text(e)}},j=function(a){var b,c;return b=Math.floor(a/60)<10?"0"+Math.floor(a/60):Math.floor(a/60),c=Math.floor(a-60*b)<10?"0"+Math.floor(a-60*b):Math.floor(a-60*b),b+":"+c},i=function(){var a=m.controls.getHandle(m.controls.progress_timeDisplay),b=m.controls.getHandle(m.controls.progress_timePicker);c.on("timeupdate",function(){l.updateDisplay()}),e.on("mousedown",function(a){l.setPosition(a.pageX)}).on("mouseleave",function(){b.text(""),n=!1}).on("mousemove",function(c){var d=l.getPosition(c.pageX);n=!0,a.text(""),b.text(d.time),b.css("left",d.left)})},i(),l.updateDisplay(),l};return new c({init:d})}}),moviqContainer.register({name:"jqQuerySelectors",factory:function(a){"use strict";return{header:".moviq-header",controls:{control_container:".moviq-controls",more_controls_container:".moviq-controls-enclosure-more",play:".moviq-btn-play",mute:".moviq-btn-mute",fullscreen:".moviq-btn-fullscreen",cc:".moviq-btn-cc",cc_choice:".moviq-btn-choose-cc",cc_menu:".moviq-controls-cc",speed:".moviq-btn-speed",speed_chooser:".moviq-speed-chooser",speed_current:".moviq-current-speed",choose_speed:".moviq-btn-choose-speed",quality_menu:".moviq-controls-quality",quality:".moviq-btn-quality",quality_choice:".moviq-btn-choose-quality",progress:".moviq-progress",progress_bar:".moviq-progress-bar",progress_buffer:".moviq-progress-buffer",progress_time:".moviq-progress-time",progress_timeDisplay:".moviq-progress-display",progress_timePicker:".moviq-progress-picker",buttons_right:".moviq-buttons-right",controls_left:".moviq-controls-left",controls_right:".moviq-controls-right",subMenus:["with-speed","with-quality","with-cc"],getHandle:function(b){return a.$dom.$controls.find(b)},getIconHandle:function(b){return a.$dom.$controls.find(b+" span")}}}}}),moviqContainer.register({name:"jqSourceParser",dependencies:["locale","ISource","ICaption","ISourceParser","jQuery"],factory:function(a,b,c,d,e){"use strict";var f,g,h,i,j,k;return g=function(a){var b,c,d=[],g=f(a.$dom.$video),h=a.$dom.$video.children("source");for(g&&d.push(g),c=0;c<h.length;c+=1)b=f(e(h[c]),c),b&&d.push(b);return d},f=function(a,c){var d=a.attr("src"),e=a.attr("type"),f=a.attr("data-label");return d&&e?new b({src:d,type:e,label:f||"Q"+((c||0)+1).toString()}):null},i=function(a){var b,c,d=[],f=a.$dom.$video.children("track");for(c=0;c<f.length;c+=1)b=h(e(f[c]),c),b&&d.push(b);return d},h=function(a){var b=a.attr("src"),d=a.attr("srclang"),e=a.attr("label"),f=a.attr("kind");return b&&d&&"captions"===f?new c({src:b,srclang:d,label:e||"unknown"}):null},j=function(a){var c,d=[];for(c=0;c<a.length;c+=1)d.push(new b(a[c]));return d},k=function(a){var b,d=[];for(b=0;b<a.length;b+=1)d.push(new c(a[b]));return d},new d({getSources:g,getCaptions:i,convertSources:j,convertCaptions:k})}}),moviqContainer.register({name:"jqVideo",dependencies:["locale","IJqVideo","jqQuerySelectors","defaultEventHandlers","jqEventEmitter","jqButtons","jqProgressMeter","sourceParser","sourceManifestParser","htmlTemplateGenerator","WatchReport","jQuery"],factory:function(a,b,c,d,e,f,g,h,i,j,k,l){"use strict";var m,n,o,p,q,r,s;return n=function(a,b,c){var d=l("<div>");b.header&&d.append(j.makeHeaderMarkup(b.header)),a.$dom.$video.length<1&&d.append(j.makeVideoMarkup(b.poster)),a.sources=h.convertSources(b.sources),a.captions=h.convertCaptions(b.captions),a.sources.length>0&&(d.children("video")[0].src=a.sources[0].src),a.captions.length>0&&d.children("video").append(j.makeCaptionMarkup(a.captions)),a.$dom.$handle.html(d.html()),a.$dom.$header=a.$dom.$handle.children(c.header).first(),a.dom.header=a.$dom.$header[0],a.$dom.$video=a.$dom.$handle.children("video").first(),a.dom.video=a.$dom.$video[0]},o=function(a){a.manifestUrl=a.dom.video.dataset.manifest,a.sources=i.getSourcesByManifest(a.dom.video.dataset.manifest),a.captions=void 0},p=function(a){a.sources=h.getSources(a),a.captions=h.getCaptions(a)},q=function(b){b.$dom.$video.children(".video-not-supported").length<1&&b.$dom.$video.append('<p class="video-not-supported">'+a.messages.browserNotSupported+"</p>")},r=function(a){var b=a.dom.video.textTracks[0];b&&(b.mode="hidden")},s=function(a,b){var c=a.$dom.$handle.find(b.controls.control_container);c.length<1&&a.$dom.$handle.append(j.makeControlsMarkup(a.sources,a.captions)),a.$dom.$controls=a.$dom.$handle.children(b.controls.control_container).first(),a.dom.controls=a.$dom.$controls[0]},m=function(a,h){var i,j=c(a);return i=new b({events:void 0,sources:void 0,captions:void 0,buttons:void 0,progress:void 0,manifestUrl:void 0,watchReport:void 0,$dom:{$handle:a,$video:a.children("video").first(),$controls:void 0,$header:a.children(j.header).first()},dom:{handle:a[0],video:a.children("video").first()[0],controls:void 0,header:a.children(j.header).first()[0]}}),i.events=d(e(i)),i.watchReport=new k(i),h?n(i,h,j):i.dom.video.dataset.manifest?o(i):p(i),q(i),r(i),s(i,j),i.buttons=f.init(i),i.progressMeter=g.init(i),a.addClass("moviqified"),i}}}),moviqContainer.register({name:"jqVideoInitializer",dependencies:["locale","Video","IVideoInitializer","jQuery"],factory:function(a,b,c,d){"use strict";return new c({bindVideos:function(a,c){var e,f,g=[],h=".moviqified";for(a?"string"==typeof a?e=d(a).not(h):a instanceof d&&(e=a.not(h)):e=d(".moviq-video").not(h),0===e.length&&console.log("moviq info","no videos were found to process"),f=0;f<e.length;f+=1)g.push(new b(d(e[f]),c));return g}})}}),moviqContainer.register({name:"CoverageReport",dependencies:["locale"],factory:function(){"use strict";return function(a){var b=this,c=a||{};b.timeRanges=c.timeRanges,b.duration=c.duration,b.durationConsumed=c.durationConsumed,b.coverage=c.coverage,b.roundedCoverage=Math.round(c.coverage)}}}),moviqContainer.register({name:"WatchReport",dependencies:["locale","CoverageReport"],factory:function(a,b){"use strict";return function(a){var c=this,d=a.dom.video;c.events=[],c.coverageReport=void 0,c.updateCoverageReport=function(){var a,e,f=[],g=0,h=0,i=d.played||{},j=d.duration;for(a=0;a<i.length;a+=1)e={start:i.start(a),end:i.end(a)},f.push(e),g+=e.end-e.start;return h=100*g/j,c.coverageReport=new b({timeRanges:f,duration:j,durationConsumed:g,coverage:h}),c.coverageReport}}}}),function(a){"use strict";var b;b=function(a){var b,c,d,e,f,g;a.register({name:"locale",factory:function(){return b||(b=a.resolve("locale::en_US")),b}}),a.register({name:"sourceParser",factory:function(){return c||(c=a.resolve("jqSourceParser")),c}}),a.register({name:"sourceManifestParser",factory:function(){return d||(d="NOT IMPLEMENTED"),d}}),a.register({name:"htmlTemplateGenerator",factory:function(){return e||(e=a.resolve("jqHtmlTemplateGenerator")),e}}),a.register({name:"Video",factory:function(){return f||(f=a.resolve("jqVideo")),f}}),a.register({name:"videoInitializer",factory:function(){return g||(g=a.resolve("jqVideoInitializer")),g}})},a.Moviq=function(a){var c,d,e,f=moviqContainer,g=a||{};return b(f),c=f.resolve("IMoviq"),d=f.resolve("videoInitializer"),e=new c({ify:d.bindVideos,bindAll:d.bindVideos}),g.bindNow&&e.bindAll(),e}}(window);