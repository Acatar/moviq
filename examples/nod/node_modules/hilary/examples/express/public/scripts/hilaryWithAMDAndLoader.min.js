/*! hilary.js 2015-01-31 */
!function(a){"use strict";var b,c,d,e,f,g,h,i,j,k=[],l=[];f={containerRegistration:"hilary::container",parentContainerRegistration:"hilary::parent",notResolvable:"hilary::handler::not::resolvable",pipeline:{beforeRegister:"hilary::before::register",afterRegister:"hilary::after::register",beforeResolve:"hilary::before::resolve",afterResolve:"hilary::after::resolve",beforeNewChild:"hilary::before::new::child",afterNewChild:"hilary::after::new::child"}},g=function(){var a,b,c=Object.prototype,d=c.toString,e=(c.hasOwnProperty,{}),f=["Boolean","Number","String","Function","Array","Date","RegExp","Object","Error"];for(a=0;a<f.length;a++)b=f[a],e["[object "+b+"]"]=b.toLowerCase();this.type=function(a){return"undefined"==typeof a?"undefined":null===a?String(a):"object"==typeof a||"function"==typeof a?e[d.call(a)]||"object":typeof a},this.notDefined=function(a){try{return"undefined"===this.type(a)}catch(b){return!0}},this.isDefined=function(a){try{return"undefined"!==this.type(a)}catch(b){return!1}},this.isFunction=function(a){return"function"===this.type(a)},this.notFunction=function(a){return"function"!==this.type(a)},this.isObject=function(a){return"object"===this.type(a)},this.notObject=function(a){return"object"!==this.type(a)},this.isArray=function(a){return"array"===this.type(a)},this.notArray=function(a){return"array"!==this.type(a)},this.isString=function(a){return"string"===this.type(a)},this.notString=function(a){return"string"!==this.type(a)},this.isBoolean=function(a){return"boolean"===this.type(a)},this.notBoolean=function(a){return"boolean"!==this.type(a)},this.notNullOrWhitespace=function(a){if(!a)return!1;if(this.notString(a))throw new Error("Unable to check if a non-string is whitespace.");return/([^\s])/.test(a)},this.isNullOrWhitespace=function(a){return this.notNullOrWhitespace(a)===!1}},i=new g,h=function(a){var b=function(b,c,d){var e=a.isString(c)?c:b,f=new Error(e);return f.message=e,b!==e&&(f.name=b),d&&(f.data=d),f};this.makeException=b,this.argumentException=function(c,d,e){var f=a.notDefined(d)?c:c+" (argument: "+d+")";return b("ArgumentException",f,e)},this.dependencyException=function(c,d,e){var f=a.notDefined(d)?c:c+" (dependency: "+d+")";return b("DependencyException",f,e)},this.notImplementedException=function(a,c){return b("NotImplementedException",a,c)},this.notResolvableException=function(a){return this.dependencyException("The module cannot be resolved",a)}},j=new h(i),d=function(){this.beforeRegisterEvents=[],this.afterRegisterEvents=[],this.beforeResolveEvents=[],this.afterResolveEvents=[],this.beforeNewChildEvents=[],this.afterNewChildEvents=[]},e=function(a,b){var c,e,g,h,i,k,l,m,n=new d;c=function(a,b){switch(a){case f.pipeline.beforeRegister:n.beforeRegisterEvents.push(b);break;case f.pipeline.afterRegister:n.afterRegisterEvents.push(b);break;case f.pipeline.beforeResolve:n.beforeResolveEvents.push(b);break;case f.pipeline.afterResolve:n.afterResolveEvents.push(b);break;case f.pipeline.beforeNewChild:n.beforeNewChildEvents.push(b);break;case f.pipeline.afterNewChild:n.afterNewChildEvents.push(b);break;default:throw j.notImplementedException("the pipeline event you are trying to register is not implemented (name: "+a+")")}},e=function(a,c){var d,e;for(d=0;d<a.length;d++)e=a[d],e.once&&a.splice(d,1),b.isFunction(e)&&e.apply(null,c)},g=function(b,c){e(this.events.beforeRegisterEvents,[a,b,c])},h=function(b,c){e(this.events.afterRegisterEvents,[a,b,c])},i=function(b){e(this.events.beforeResolveEvents,[a,b])},k=function(b,c){e(this.events.afterResolveEvents,[a,b,c])},l=function(b){e(this.events.beforeNewChildEvents,[a,b])},m=function(b,c){e(this.events.afterNewChildEvents,[a,b,c])},this.events=n,this.registerEvent=c,this.beforeRegister=g,this.afterRegister=h,this.beforeResolve=i,this.afterResolve=k,this.beforeNewChild=l,this.afterNewChild=m},c=function(a,b){if(this.dependencies=void 0,this.ctor=void 0,i.isArray(a)&&(this.dependencies=a),i.isFunction(a))this.ctor=a;else if(i.isObject(a))this.ctor=function(){return a};else{if(!i.isFunction(b))throw j.argumentException("A constructor of type function is required","ctor (or dependencies)",name);this.ctor=b}},b=function(a){var d,i,j,m,n,o,p,q,r,s,t,u=this,v=a||{},w={},x=v.parentContainer,y=v.utils||new g,z=v.exceptions||new h(y),A=v.pipeline||new e(u,y);for(d=function(a){a=a||{};var c,d;return c={parentContainer:u,utils:a.utils||y,exceptions:a.exceptions||z},A.beforeNewChild(c),d=new b(c),A.afterNewChild(c,d),d},i=function(a,b){if(A.beforeRegister(a,b),y.notString(a))throw z.argumentException("The first argument must be the name of the module","moduleNameOrFunc",a);if(a===f.containerRegistration)throw z.argumentException("The name you are trying to register is reserved","moduleName",a);if(a===f.parentContainerRegistration)throw z.argumentException("The name you are trying to register is reserved","moduleName",a);if(y.notDefined(b))throw z.argumentException("The second argument must be the module definition","moduleDefinition");return w[a]=b,A.afterRegister(a,b),u},m=function(a){if(a instanceof c){var b,d=[];if(y.isArray(a.dependencies)&&a.dependencies.length>0){for(b=0;b<a.dependencies.length;b++)d.push(j(a.dependencies[b]));return a.ctor.apply(null,d)}return 0===a.ctor.length?a.ctor.call():a.ctor}return a},n=function(a){return a===f.containerRegistration?o():a===f.parentContainerRegistration?p():void 0},j=function(a){var b,c;if(A.beforeResolve(a),c=n(a),c||(b=w[a],void 0!==b&&(c=m(b))),void 0!==c)return A.afterResolve(a,c),c;if(void 0!==x)return x.resolve(a);if(!y.isFunction(w[f.notResolvable]))throw z.notResolvableException(a);w[f.notResolvable](a)},o=function(){return w},p=function(){return void 0!==x?x.getContainer():null},u.createChildContainer=d,u.getContainer=o,u.getParentContainer=p,u.register=i,u.resolve=j,u.tryResolve=function(a){try{return j(a)}catch(b){console.log(b)}},u.registerEvent=function(a,b){return A.registerEvent(a,b)},u.getConstants=function(){return f},u.getUtils=function(){return y},u.getExceptionHandlers=function(){return z},q=0;q<k.length;q++)r=k[q],y.isFunction(r.factory)?u[r.name]=r.factory(u):y.isDefined(r.factory)&&(u[r.name]=r.factory);for(s=0;s<l.length;s++)t=l[s],y.isFunction(t)&&t(u,v)},b.extend=function(a,b){return k.push({name:a,factory:b}),!0},b.onInit=function(a){return l.push(a),!0},a.Hilary=b,a.HilaryModule=c}("undefined"!=typeof module&&module.exports?module.exports:window),function(a){"use strict";var b;Hilary.extend("define",function(a){var b=function(b,c,d){var e=a.getUtils(),f=a.getExceptionHandlers();if(e.isFunction(d))return a.register(b,new HilaryModule(c,d));if(e.isString(b)&&e.isFunction(c))return a.register(b,new HilaryModule(c));if(e.isArray(b)&&e.isFunction(c))return a.require(b,c);if(e.isFunction(b))return a.require(b);if(e.isObject(b))return a.require(function(a,c){var d;for(d in b)b.hasOwnProperty(d)&&(c[d]=b[d])});if(e.isString(b)&&e.isObject(c))return a.require(function(a,d){d[b]=c});throw f.argumentException("A factory function was not found to define this module","factory")};return b.amd={},b}),Hilary.extend("require",function(b){return function(c,d){if("function"==typeof c)return c(b.resolve,b.getContainer(),"undefined"!=typeof module?module:a);if("string"==typeof c)return b.resolve(c);var e,f=[];for(e=0;e<c.length;e++)f.push(b.resolve(c[e]));return d.apply(null,f)}}),b=new Hilary,a.AMDContainer=b,a.define=b.define,a.require=b.require}("undefined"!=typeof module&&module.exports?module.exports:window),function(a){"use strict";var b,c,d,e,f,g,h=a.scripts[0],i=[];d=function(a){return"/"===a.substring(0,1)?a:"/"+a},e=function(a){for(;"/"===a.substring(0,1);)return e(a.substring(1));return a},f=function(a){return"/"===a.substring(a.length-1,a.length)?a:a+"/"},g=function(a,b){return d(f(a))+e(b)},b=function(){for(var a;i[0]&&"loaded"===i[0].readyState;)a=i.shift(),a.onreadystatechange=null,h.parentNode.insertBefore(a,h)},c=function(c){var d;h.hasOwnProperty("async")?(d=a.createElement("script"),d.async=!0,d.src=c,a.head.appendChild(d)):h.readyState?(d=a.createElement("script"),i.push(d),d.onreadystatechange=b,d.src=c):a.write('<script src="'+c+'" defer></script>')},Hilary.onInit(function(a,b){a.baseUrl=b.baseUrl&&d(f(b.baseUrl))||"/scripts/"}),Hilary.extend("loadDependency",function(a){var b=a.getConstants();return function(d,f){var g=function(a,b){b===d&&f(b)};return g.once=!0,a.registerEvent(b.pipeline.afterRegister,g),c(a.baseUrl+e(d)+".js"),a}})}(document);